import sys
N,M=map(int,input().split())
board=[]
for i in range(N):
    row=list(map(int,input().split()))
    board.append(row)


tetromino = [[[0, 1], [0, 2], [0, 3]], [[1, 0], [2, 0], [3, 0]],
[[0, 1], [1, 0], [1, 1]], [[1, 0], [2, 0], [2, 1]],
[[1, 0], [2, 0], [2, -1]], [[0, 1], [0, 2], [1, 0]],
[[0, 1], [0, 2], [1, 2]], [[0, 1], [1, 1], [2, 1]],
[[0, 1], [1, 0], [2, 0]], [[0, 1], [0, 2], [-1, 2]],
[[1, 0], [1, 1], [1, 2]], [[1, 0], [1, 1], [2, 1]],
[[1, 0], [1, -1], [2, -1]], [[0, 1], [-1, 1], [-1, 2]],
[[0, 1], [1, 1], [1, 2]], [[0, 1], [0, 2], [1, 1]],
[[1, 0], [1, 1], [2, 0]], [[1, 0], [1, -1], [2, 0]],
[[0, 1], [0, 2], [-1, 1]]]

ans=0

for i in range(N):
    for j in range(M):
        for k in tetromino:
            try:
                sum=board[i][j]+board[i+k[0][0]][j+k[0][1]]+board[i+k[1][0]][j+k[1][1]]+board[i+k[2][0]][j+k[2][1]]
            except:
                sum=0

            ans=max(ans,sum)

print(ans)